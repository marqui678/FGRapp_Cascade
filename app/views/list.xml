<Alloy>
	
	<!-- create global instance of collection we'll bind -->	
	<Collection src="feed"/>
	<Window id="lwin" title="Free Group Rides">
		<!--menu button-->
		<LeftNavButton platform=ios>
        	<Button onClick="openMenu" image="images/ic_menu_light.png"/>
        </LeftNavButton>
    	<Require type="widget" src="com.alcoapps.drawermenu" id="drawermenu"/>
		<!-- Android: Add MenuItem for refresh -->		
		<ListView id="listView" platform="ios,android" defaultItemTemplate="template" onItemclick="select">	
			<!-- iOS RefreshControl -->
			<RefreshControl platform="ios" id="refreshControl" onRefreshstart="refresh" />
			<!-- search, shorthand with Ti.UI.SearchBar -->
	      <SearchBar id="search"/>
			<Templates>
				<ItemTemplate name="template" class="item">
					<View id="firstLine">
	                    <Label class="line1" bindId="title" id="title" />
						<View id="secondLine">
							<ImageView class="line2" width="20dp" image="/images/Date.png"></ImageView>
							<Label class="line2" bindId="startDateTime" id="startDateTime" />
							<View id="thirdLine">
									<Label class="line3" bindId="paceNumber" id="paceNumber" backgroundImage="/images/pace.png"/>
						            <Label class="line3" bindId="pace" id="pace" />
						            <Label class="line3" bindId="distanceOne" id="distanceOne"/>
						            <Label class="line3" bindId="distanceTwo" id="distanceTwo"/>
					        </View>
					    </View>
                	</View>
				</ItemTemplate>
			</Templates>
			
			<!-- Alloy data-binding -->

			<ListSection id="listSection" dataCollection="feed" dataTransform="transform">
				<ListItem itemId="{link}" distanceTwo:text="{distanceTwo}" searchableText="{title}" title:text="{title}" pace:text="{pace}" paceNumber:text="{paceNumber}" startDateTime:text="{startDateTime}" distanceOne:text="{distanceOne}"  />
			</ListSection>
			
		</ListView>
		<Button onClick="openMapview" top="0" right="0">To map</Button>
		<View id='bottomBar'>
			<Button class="tabBarBtn" id="filter" onClick="filter">Filter</Button>
			<Button class="tabBarBtn" id="sort" onClick="openSortView">Sort</Button>
		</View>
		
	</Window>
	
</Alloy>